<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menú del Comedor</title>
    <link rel="stylesheet" href="menuComedor.css">
</head>
<body>
    <div class="container">
        <header>
            <h1 id="menu-title">Menú de la Semana</h1>
        </header>
        <div id="menu-content" class="row row-cols-1 row-cols-lg-3 mb-3 align-items-center"></div>
    </div>

    <script>
        // Función para cargar el menú desde un archivo JSON
        function loadMenu() {
            return fetch('menu.json')
                .then(response => response.json())
                .then(data => {
                    const menuContainer = document.getElementById('menu-content');
                    menuContainer.innerHTML = '';  // Limpiar el contenedor antes de agregar nuevos días
                    document.getElementById('menu-title').innerText = `¡Menú ${data.week}!`;

                    // Obtener fecha actual y los siguientes tres días
                    const today = new Date();
                    const datesToShow = [];
                    
                    for (let i = 0; i < 2; i++) {
                        let date = new Date();
                        date.setDate(today.getDate() + i); // Añadir los días
                        datesToShow.push(date.toISOString().split('T')[0]); // Formato YYYY-MM-DD
                        console.log(date)
                    }

                    // Filtrar los días que coinciden con la fecha actual y los siguientes 3 días
                    const daysToShow = data.days.filter(day => datesToShow.includes(day.date));
                    console.log(daysToShow)

                    // Verificar si se encontraron días
                    if (daysToShow.length === 0) {
                        menuContainer.innerHTML = '<p>No hay menú disponible para los próximos días.</p>';
                        return;
                    }

                    // Renderizar los días filtrados
                    daysToShow.forEach(day => {
                        let card = `
                        <div class="col">
                            <div class="card mb-4 rounded-3 shadow-sm border-primary">
                                <div class="card-header py-3 text-white bg-primary border-primary">
                                    <h4 class="my-0 fw-bold">${day.day}</h4>
                                </div>
                                <div class="card-body">
                                    <table class="table">
                                        <tbody>
                                            ${Object.keys(day.menu).map(item => `
                                                <tr>
                                                    <th scope="row">${item}:</th>
                                                    <td>${day.menu[item]}</td>
                                                </tr>
                                            `).join('')}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>`;
                        menuContainer.innerHTML += card;
                    });
                })
                .catch(error => console.error('Error al cargar el menú:', error));
        }

        // Cargar el menú al cargar la página
        document.addEventListener('DOMContentLoaded', loadMenu);
    </script>
</body>
</html>
