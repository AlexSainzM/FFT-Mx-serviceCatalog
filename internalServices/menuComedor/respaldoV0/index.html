<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Alejandro Sainz Morales, FFT-Mx team and Bootstrap contributors">
    <meta name="generator" content="Alejandro 0.0.1">
    <title>FFT México - Menú Comedor</title>

    <link href="../../assets/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

      .center-text {
        text-align: center;
        margin-top: 20%;
      }
    </style>

    <!-- Custom styles for this template -->
    <link href="./menuComedor.css" rel="stylesheet">

  </head>

  <body>
    
    <div class="container py-3">
  
      <header>
    
        <!--Header content-->
        <div class="d-flex flex-column flex-md-row align-items-center pb-3 mb-4 border-bottom">
          <a href="../index.html" class="d-flex align-items-center text-dark text-decoration-none">
            <img src="../../assets/img/common/LogoFFT.gif" alt="FFT-MX-LOGO"  height="40" class="me-2">
            <span class="fs-4">FFT México</span>
          </a>
    
          <nav class="d-inline-flex mt-2 mt-md-0 ms-md-auto">
            <a class="me-3 py-2 text-dark text-decoration-none" href="">¡Ya puedes pagar con tu tarjeta de Vales!</a>
            <a class="me-3 py-2 text-dark text-decoration-none" href="#"></a>
            <a class="me-3 py-2 text-dark text-decoration-none" href="#"></a>
            <a class="py-2 text-dark text-decoration-none" href="">¡Recuerda que 8 a 10 am tenemos desayunos!</a>
          </nav>
        </div>
    
        <!--This seccion is part of the Header-->
        <!-- <div class="row pricing-header p-3 pb-md-4 mx-auto text-center">
          <div class="col-4">
            <img src="./" alt="">
          </div>
          <div class="col-8">
            <h1 class="display-4 fw-normal">¡Menú KW30!</h1>
          </div>
        </div> -->
    
      </header>
    
      <main>

        <div class="d-flex flex-column flex-md-row align-items-center pb-3 mb-4 titulo">
            <img src="./menuLogo.png" alt="FFT-MX-LOGO"  height="100" class="me-2" style="border-radius: 15px;">
            <h1 id="menu-title" class="display-5 fw-normal"></h1> 
        </div>

    
        <div id="menu-content" class="row row-cols-1 row-cols-xxl-3 mb-3 align-items-center">
    
        </div>        
    
      </main>
    
      <footer class="pt-4 my-md-5 pt-md-5 text-muted border-top text-center">
        <div class="row">
          <div class="col-12 col-md">
            <img class="mb-2" src="../../assets/img/common/LogoFFT.gif" alt=""  height="19">
            <small class="d-block mb-3 text-muted">FFT México S.A. de C.V. &middot; &copy; 2024</small>
          </div>
        </div>
      </footer>
    
    
      <!-- Un footer sencillo que me gustó -->
      <!-- 
      <footer class="pt-5 my-5 text-muted border-top text-center">
        FFT México S.A. de C.V. &middot; &copy; 2024
      </footer> 
      -->
    
    </div>

    <script src="../../assets/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Función para cargar el menú desde un archivo JSON
      function loadMenu() {
          return fetch('menu.json')
              .then(response => response.json())
              .then(data => {
                  const menuContainer = document.getElementById('menu-content');
                  menuContainer.innerHTML = '';  // Limpiar el contenedor antes de agregar nuevos días

                  // Función para obtener la semana actual del año
                  function getCurrentWeek() {
                    const today = new Date();
                    const firstDayOfYear = new Date(today.getFullYear(), 0, 1); // 1 de enero
                    const pastDaysOfYear = (today - firstDayOfYear) / 86400000; // Diferencia en días entre hoy y el 1 de enero

                    // Calcular la semana actual (división de días entre 7, ajustando por el día inicial de la semana)
                    const weekNumber = Math.ceil((pastDaysOfYear + firstDayOfYear.getDay() + 1) / 7);

                    return weekNumber;
                  }

                  document.getElementById('menu-title').innerText = `¡Menú KW${getCurrentWeek()}!`;

                  // Obtener fecha actual y los siguientes tres días
                  const today = new Date();
                  const datesToShow = [];
                  
                  for (let i = 0; i < 3; i++) {
                      let date = new Date();
                      date.setDate(today.getDate() + i); // Añadir los días
                      datesToShow.push(date.toISOString().split('T')[0]); // Formato YYYY-MM-DD
                  }

                  // Filtrar los días que coinciden con la fecha actual y los siguientes 3 días
                  const daysToShow = data.days.filter(day => datesToShow.includes(day.date));

                  // Verificar si se encontraron días
                  if (daysToShow.length === 0) {
                      menuContainer.innerHTML = '<p>No hay menú disponible para los próximos días.</p>';
                      return;
                  }

                  // Renderizar los días filtrados
                  daysToShow.forEach(day => {
                      let card = `
                      <div class="col">
                          <div class="card mb-4 rounded-3 shadow-sm border-primary">
                              <div class="card-header py-3 text-white bg-primary border-primary">
                                  <h4 class="my-0 fw-bold">${day.day}</h4>
                              </div>
                              <div class="card-body">
                                  <table class="table">
                                      <tbody>
                                          ${Object.keys(day.menu).map(item => `
                                              <tr>
                                                  <th scope="row">${item}:</th>
                                                  <td>${day.menu[item]}</td>
                                              </tr>
                                          `).join('')}
                                      </tbody>
                                  </table>
                              </div>
                          </div>
                      </div>`;
                      menuContainer.innerHTML += card;
                  });
              })
              .catch(error => console.error('Error al cargar el menú:', error));
      }

      // Cargar el menú al cargar la página
      document.addEventListener('DOMContentLoaded', loadMenu);
    </script>
  </body>
</html>
